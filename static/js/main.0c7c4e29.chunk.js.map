{"version":3,"sources":["components/selectDropdown.jsx","components/navigation.jsx","objects/entity.js","assets/bunny.png","objects/target.js","assets/carrot.png","algorithm/genetic.js","App.js","reportWebVitals.js","index.js"],"names":["SelectDropdown","Dropdown","className","Toggle","variant","id","this","props","items","selected","name","Menu","map","item","Item","onClick","onSelect","Component","Navigation","algorithms","state","ai_selection","nchildren","sel_cutoff","mut_chance","mut_amt","handleAiSelect","setState","onChange","handleRangeSelect","e","change","target","value","parentState","sim_iterations","Math","round","sim_roundtime","sim_total_time","is_running","Button","onStartStop","call","onReset","Form","Group","controlId","Label","Control","type","min","max","step","custom","generations","slice","reverse","gen","best","Entity","x","y","start_x","start_y","sprite","undefined","age","points","reatched_target","PIXI","from","anchor","set","reset","Target","Genetic","setup","entities","entity","instr","j","random","time","push","instr_ptr","instr_tmr","simulate","delta","has_task","entity_delta","length","instr_delta","cutValue","mutate","instructions","settings","instructions_cpy","a","Object","assign","improve","best_pts","selection","sort","b","floor","i","App","pixi","stage","removeChild","view","width","height","addChild","resetEntities","render","console","log","handleSettingsChange","handleUserStartStop","handleUserReset","ref","thisDiv","pixiCanvas","calculateEntityPoints","dx","dy","dist","sqrt","clientWidth","clientHeight","backgroundColor","appendChild","ticker","add","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0c7c4e29.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Dropdown } from 'react-bootstrap';\nimport './navigation.css'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass SelectDropdown extends Component {\n\n  render() {\n    return (\n      <Dropdown className=\"m-2\">\n        <Dropdown.Toggle variant=\"secondary\" id=\"dropdown-basic\">\n          {this.props.items[this.props.selected].name}\n        </Dropdown.Toggle>\n\n        <Dropdown.Menu>\n          {this.props.items.map((item) =>\n            <Dropdown.Item onClick={() => { this.props.onSelect(item.id) }}>{item.name}</Dropdown.Item>\n          )}\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n\n}\n\nexport default SelectDropdown;\n","import React, { Component } from 'react';\nimport { Button, Form } from 'react-bootstrap';\nimport SelectDropdown from './selectDropdown';\n\nclass Navigation extends Component {\n  algorithms = [\n    {id: 0, name: \"Genetic\"},\n    //{id: 1, name: \"Network\"},\n  ];\n\n  state = {\n    ai_selection: 0,\n    nchildren: 100,\n    sel_cutoff: 20,\n    mut_chance: 20,\n    mut_amt: 20\n  };\n\n\n  render() {\n    return (\n      <nav className=\"sidebar\">\n        <h1>AI Visual</h1>\n        <hr />\n        <SelectDropdown\n          items={this.algorithms}\n          selected={this.state.ai_selection}\n          onSelect={this.handleAiSelect}\n        />\n\n\n        Generation {this.props.parentState.sim_iterations} <br />\n        Current time {Math.round(this.props.parentState.sim_roundtime)} <br />\n        Total time {Math.round(this.props.parentState.sim_total_time)} <br />\n\n        {(function () {\n          if (this.props.parentState.is_running) {\n            return <Button className=\"m-2\" variant=\"warning\" onClick={this.props.onStartStop}>Pause</Button>\n          } else {\n            return <Button className=\"m-2\" variant=\"success\" onClick={this.props.onStartStop}>Start</Button>\n          }\n        }).call(this)}\n\n        <Button className=\"m-2\" variant=\"danger\" onClick={this.props.onReset}>Reset</Button>\n\n        <Form.Group className=\"m-2\" controlId=\"formBasicRangeCustom\">\n          <Form.Label>Number of children: {this.state.nchildren}</Form.Label>\n          <Form.Control name=\"nchildren\" onChange={this.handleRangeSelect} type=\"range\" min=\"10\" max=\"500\" step=\"10\" value={this.state.nchildren} custom />\n        </Form.Group>\n\n        <Form.Group className=\"m-2\" controlId=\"formBasicRangeCustom\">\n          <Form.Label>Selection cutoff: {this.state.sel_cutoff}%</Form.Label>\n          <Form.Control name=\"sel_cutoff\" onChange={this.handleRangeSelect} type=\"range\" min=\"1\" max=\"100\" step=\"1\" value={this.state.sel_cutoff} custom />\n        </Form.Group>\n\n        <Form.Group className=\"m-2\" controlId=\"formBasicRangeCustom\">\n          <Form.Label>Mutation chance: {this.state.mut_chance}%</Form.Label>\n          <Form.Control name=\"mut_chance\" onChange={this.handleRangeSelect} type=\"range\" min=\"1\" max=\"100\" step=\"1\" value={this.state.mut_chance} custom />\n        </Form.Group>\n\n        <Form.Group className=\"m-2\" controlId=\"formBasicRangeCustom\">\n          <Form.Label>Mutation amount: {this.state.mut_amt}%</Form.Label>\n          <Form.Control name=\"mut_amt\" onChange={this.handleRangeSelect} type=\"range\" min=\"1\" max=\"1000\" step=\"1\" value={this.state.mut_amt} custom />\n        </Form.Group>\n\n        Generations:<br />\n        <ul>\n        {this.props.parentState.generations.slice(0).reverse().slice(0, 10).map((gen) => {\n          return <li key={gen.gen}>G{gen.gen} = {Math.round(gen.best)}</li>\n        })}\n        </ul>\n      </nav>\n    );\n  }\n\n  handleAiSelect = (item) => {\n    this.setState({\n      ai_selection: item\n    });\n    this.props.onChange(this.state);\n  };\n\n  handleRangeSelect = (e) => {\n    let change = {};\n    change[e.target.name] = e.target.value;\n    this.setState(change);\n    this.props.onChange(this.state);\n  };\n\n}\n\nexport default Navigation;\n","import * as PIXI from 'pixi.js'\nimport bunny from '../assets/bunny.png'\n\nclass Entity {\n  start_x = 0;\n  start_y = 0;\n  sprite = undefined;\n  age = 0;\n  points = 0;\n  reatched_target = false;\n\n  constructor(x, y) {\n    this.start_x = x || 0;\n    this.start_y = y || 0;\n\n    this.sprite = PIXI.Sprite.from(bunny);\n    this.sprite.anchor.set(0.5);\n\n    this.reset();\n  }\n\n  reset() {\n    this.sprite.x = this.start_x;\n    this.sprite.y = this.start_y;\n\n    this.age = 0;\n    this.points = 0;\n    this.reatched_target = false;\n  }\n}\n\n\nexport default Entity;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAlCAYAAABcZvm2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAWNJREFUeNrsV8sNwjAMbUqBBWACxB2pQ8AKcGALTsAJuDEFB1gBhuDAuWICmICPQh01pXWdJqEFcaglRGRbfonjPLuMc+5QwhjLGEJfZusjxZOL9akZKye9G98vPMfvsAx4qBfKwfzBL9s6uUHpI6U/u7+BKGkNb/H6umtk7MczF0HyfKS4zo/k/4AgTV8DOizrqX8oECgC+MGa8lGJp9sJDiAB8nyqYoglvJOPbP97IqoATGxWVZeXJlMQwYHA3piF8wJIblOVNBBxe3TPMLoHIKtxrbS7AAbBrA4Y5NaPAXf8LjN6wKZ0RaZOnlAFZnuXInVR4FTE6eYp0olPhhshtXsAwY3PquoAJNkIY33U7HTs7hYBwV24ItUKqDwgKF3VzAZ6k8HF+B1BMF8xRJbeJoqMXHZAAQ1kwoluURCdzepEugGEImBrIADB7I4lyfbJLlw92FKE6b5hVd+ktv4vAQYASMWxvlAAvcsAAAAASUVORK5CYII=\"","import * as PIXI from 'pixi.js'\nimport carrot from '../assets/carrot.png'\n\nclass Target {\n  x = 0;\n  y = 0;\n  sprite = undefined;\n\n  constructor(x, y) {\n    this.x = x || 0;\n    this.y = y || 0;\n\n    this.sprite = PIXI.Sprite.from(carrot);\n    this.sprite.anchor.set(0.5);\n    this.sprite.x = this.x;\n    this.sprite.y = this.y;\n  }\n}\n\n\nexport default Target;\n","export default \"data:image/png;base64,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\"","\n\nclass Genetic {\n  static setup = (entities) => {\n\n    for (const entity of entities) {\n      entity.instr = [];\n\n      for (let j = 0; j < 20; j++) {\n        let instr = {\n          x: Math.random()*2-1,\n          y: Math.random()*2-1,\n          time: Math.random() * 20\n        };\n        entity.instr.push(instr);\n      }\n    }\n\n    this.reset(entities);\n  }\n\n  static reset = (entities) => {\n    for (const entity of entities) {\n      entity.instr_ptr = 0;\n      entity.instr_tmr = 0;\n    }\n  }\n\n  static simulate = (delta, entities) => {\n    let has_task = false;\n\n    for (const entity of entities) {\n      let entity_delta = delta;\n      do {\n        if (entity.instr_ptr >= entity.instr.length) {\n          entity_delta = 0;\n          break;\n        }\n        let instr = entity.instr[entity.instr_ptr];\n        has_task = true;\n\n        let instr_delta = (entity_delta <= instr.time-entity.instr_tmr)? entity_delta : instr.time-entity.instr_tmr;\n\n        entity.sprite.x += instr.x * instr_delta;\n        entity.sprite.y -= instr.y * instr_delta;\n\n        entity.instr_tmr += instr_delta;\n        entity_delta -= instr_delta;\n        if (entity.instr_tmr >= instr.time) {\n          entity.instr_ptr++;\n          entity.instr_tmr = 0;\n        }\n      } while (entity_delta > 0);\n    }\n\n    return has_task;\n  }\n\n  static cutValue = (value, min, max) => {\n    if (value > max) return max;\n    if (value < min) return min;\n    return value;\n  }\n\n  static mutate = (instructions, settings) => {\n    var instructions_cpy = instructions.map(a => Object.assign({}, a));;\n    for (const instr of instructions_cpy) {\n      if (Math.random()*100 < settings.mut_chance) {\n        instr.x += (Math.random()*2-1)*2*settings.mut_amt/100;\n        instr.x = this.cutValue(instr.x, -2, 2);\n        instr.y += (Math.random()*2-1)*2*settings.mut_amt/100;\n        instr.y = this.cutValue(instr.y, -2, 2);\n        instr.time += (Math.random()*2-1)*30*settings.mut_amt/100;\n        instr.time = this.cutValue(instr.time, 0, 30);\n      }\n    }\n    return instructions_cpy;\n  }\n\n\n  static improve = (entities, settings) => {\n    let best_pts = 0;\n\n    //do selection\n    var selection = [];\n    entities.sort((a, b) => { return b.points - a.points;});\n    best_pts = entities[0].points;\n\n    let sel_cutoff = Math.floor(settings.sel_cutoff / 100 * entities.length);\n    for (let i=0; i < sel_cutoff; i++) {\n      selection.push(entities[i]);\n    }\n\n    //do mutation and spread genes\n    for (let i=0; i < entities.length; i++) {\n      entities[i].instr = this.mutate(selection[i%sel_cutoff].instr, settings);\n    }\n\n    return best_pts;\n  }\n\n}\n\nexport default Genetic;\n","import React, { Component } from 'react';\nimport * as PIXI from 'pixi.js'\nimport Navigation from \"./components/navigation\";\nimport Entity from \"./objects/entity.js\"\nimport Target from \"./objects/target.js\"\nimport Genetic from \"./algorithm/genetic.js\"\nimport './App.css'\n\n\nclass App extends Component {\n  pixi = PIXI.Application;\n  pixiCanvas: HTMLDivElement;\n\n  state =  {\n    is_running: false,\n    sim_iterations: 0,\n    sim_roundtime: 0,\n    sim_total_time: 0,\n    generations: []\n  };\n\n  entities = [];\n  target = Target;\n\n  settings =\n  {\n    ai_selection: 0,\n    nchildren: 100,\n    sel_cutoff: 20,\n    mut_chance: 20,\n    mut_amt: 20\n  };\n\n  componentDidMount() {\n    this.pixi = new PIXI.Application(\n      {\n        width: this.pixiCanvas.clientWidth,\n        height: this.pixiCanvas.clientHeight,\n        backgroundColor: 0xfff0ff\n      }\n    );\n\n    console.log(this.pixiCanvas);\n\n    this.pixiCanvas.appendChild(this.pixi.view);\n    this.pixi.ticker.add(this.simulate);\n    this.target = new Target(this.pixi.view.width / 2, 50);\n    this.pixi.stage.addChild(this.target.sprite);\n    this.reset();\n  }\n\n  reset = () => {\n    //remove all from scene\n    for (const entity of this.entities) {\n      this.pixi.stage.removeChild(entity.sprite);\n    }\n\n    let entities = [];\n    for(let i=0; i < this.settings.nchildren; i++) {\n      entities.push(new Entity(this.pixi.view.width / 2, this.pixi.view.height- 50));\n    }\n    this.entities = entities;\n\n    //add all to scene\n    for (const entity of this.entities) {\n      this.pixi.stage.addChild(entity.sprite);\n    }\n\n    this.setState({\n      sim_roundtime: 0,\n      sim_total_time: 0,\n      sim_iterations: 0,\n      generations: []\n    });\n\n    //initialize\n    Genetic.setup(this.entities);\n  }\n\n  resetEntities = () => {\n    for (const entity of this.entities) {\n      entity.reset();\n      Genetic.reset(this.entities);\n    }\n  }\n\n  render = () => {\n    console.log(this.state);\n    return (\n      <div className=\"App\">\n        <Navigation\n          parentState={this.state}\n          onChange={this.handleSettingsChange}\n          onStartStop={this.handleUserStartStop}\n          onReset={this.handleUserReset} />\n        <div className=\"Canvas\" ref={(thisDiv) => {this.pixiCanvas = thisDiv}} />\n      </div>\n    );\n  }\n\n  handleUserReset = () => {\n    this.reset();\n  }\n\n  handleUserStartStop = () => {\n    this.setState({\n      is_running: !this.state.is_running\n    });\n\n  }\n\n\n  handleSettingsChange = (settings) => {\n    this.settings = settings;\n  }\n\n\n  calculateEntityPoints = (delta) => {\n    for (const entity of this.entities) {\n      entity.age += delta;\n      let dx = entity.sprite.x - this.target.sprite.x;\n      let dy = entity.sprite.y - this.target.sprite.y;\n      let dist = Math.sqrt(dx * dx + dy * dy);\n\n      entity.points += (200-dist) * delta;// * entity.age;\n\n    }\n  }\n\n\n  simulate = (delta) => {\n    if (this.state.is_running) {\n      this.setState({\n        sim_roundtime: this.state.sim_roundtime + delta,\n        sim_total_time: this.state.sim_total_time + delta\n      });\n      let has_task = Genetic.simulate(delta, this.entities);\n      this.calculateEntityPoints(delta);\n\n      //end simulation and adjust learning model\n      if (this.sim_roundtime >= 300 || !has_task) {\n        let best_pts = Genetic.improve(this.entities, this.settings);\n        this.resetEntities();\n\n        let generations = this.state.generations;\n        generations.push({gen: this.state.sim_iterations, best: best_pts});\n        this.setState({\n          sim_roundtime: 0,\n          sim_iterations: this.state.sim_iterations +1,\n          generations: generations\n        });\n      }\n    }\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}